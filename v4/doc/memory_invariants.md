
def test_determinism():
    m = SearchMemory()
    u = extract_memory("bicchiere rosso", m)
    assert update_memory(m, u) == update_memory(m, u)

'''โ ุงู ฺ ูโฺฏูุฏุ

ุงู ุชุณุช ุฏุงุฑุฏ ูโฺฏูุฏ:

ุงฺฏุฑ ฺฉ ุญุงูุธู ฺฉุณุงู ู ฺฉ ูพุงู ฺฉุงุฑุจุฑ ฺฉุณุงู ุฏุงุดุชู ุจุงุดู
ู ุฏู ุจุงุฑ ูพุดุช ุณุฑ ูู memory ุฑุง ุขูพุฏุช ฺฉูู
๐ ูุชุฌู ุจุงุฏ ุฏููุงู ฺฉ ุจุงุดุฏ
ุงู ุชุงุจุน ุดุงูุณ ูุณุชุ ูุงุจุณุชู ุจู ุฒูุงู ูุณุชุ LLM ูุฏุงุฑุฏุ side-effect ูุฏุงุฑุฏ
update_memory ุจุงุฏ ูุซู ุฑุงุถ ุจุงุดุฏุ ูู ูุซู ฺุชโุจุงุช
'''

def test_negation_only_removes():
    m = SearchMemory(attributes={"material": "plastica"})
    updates = {"negations": {"material": "__ANY__"}}
    m2 = update_memory(m, updates)
    assert "material" not in m2.attributes

'''โ ุงู ฺ ูโฺฏูุฏุ

ุงู ุชุณุช ุฏุงุฑุฏ ูโฺฏูุฏ:

Negation ููุท ุงุฌุงุฒู ุฏุงุฑุฏ ฺุฒ ุฑุง ุญุฐู ฺฉูุฏ
ุชุง ุงูุงู ฺฉุงุฑุจุฑ ฺฏูุชู: ยซุฌูุณุด ูพูุงุณุชฺฉ ุจุงุดุฏยป

ฺฉุงุฑุจุฑ ุจุนุฏุงู ฺฏูุชู:
ยซุฏฺฏู ูพูุงุณุชฺฉ ููโุฎูุงูยป
ุง
ยซูฺ ุฌูุณ ุฎุงุต ููโุฎูุงูยป ุญู ูุฏุงุฑุฏ ฺุฒ ุงุถุงูู ฺฉูุฏ'''




